{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\noopu\\\\OneDrive\\\\Documents\\\\DIYKaraoke\\\\Frontend\\\\app\\\\components\\\\Player.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FavoriteIcon from \"./FavoriteIcon\";\nimport { Audio } from \"expo-av\";\nimport Header from \"./Header\";\nimport AlbumArt from \"./AlbumArt\";\nimport TrackDetails from \"./TrackDetails\";\nimport SeekBar from \"./SeekBar\";\nexport default function Player(props) {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      sound = _useState2[0],\n      setSound = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isPlaying = _useState4[0],\n      setIsPlaying = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      duration = _useState6[0],\n      setDuration = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      position = _useState8[0],\n      setPosition = _useState8[1];\n\n  var _useState9 = useState(props.selectedTrackNumber - 1),\n      _useState10 = _slicedToArray(_useState9, 2),\n      selectedTrackNumber = _useState10[0],\n      setSelectedTrackNumber = _useState10[1];\n\n  console.log(props);\n  var song = props.tracks[selectedTrackNumber];\n\n  var onPlaybackStatusUpdate = function onPlaybackStatusUpdate(status) {\n    setIsPlaying(status.isPlaying);\n    setDuration(status.durationMillis);\n    setPosition(status.positionMillis);\n  };\n\n  var playCurrentSong = function playCurrentSong() {\n    var _await$Audio$Sound$cr, sound;\n\n    return _regeneratorRuntime.async(function playCurrentSong$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(\"Loading Sound\");\n            console.log(song.audioUrl);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(Audio.Sound.createAsync({\n              uri: song.audioUrl\n            }, {\n              shouldPlay: isPlaying\n            }, onPlaybackStatusUpdate));\n\n          case 4:\n            _await$Audio$Sound$cr = _context.sent;\n            sound = _await$Audio$Sound$cr.sound;\n            setSound(sound);\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(sound.playAsync());\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  React.useEffect(function () {\n    return sound ? function () {\n      console.log(\"Unloading Sound\");\n      sound.unloadAsync();\n    } : undefined;\n  }, [sound]);\n\n  var onPlayPausePress = function onPlayPausePress() {\n    return _regeneratorRuntime.async(function onPlayPausePress$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (sound) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            if (!isPlaying) {\n              _context2.next = 7;\n              break;\n            }\n\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(sound.stopAsync());\n\n          case 5:\n            _context2.next = 9;\n            break;\n\n          case 7:\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(sound.playAsync());\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getProgress = function getProgress() {\n    if (sound == null | duration == null || position == null) {\n      return 0;\n    }\n\n    return position / duration * 100;\n  };\n\n  var seek = function seek(time) {\n    time = Math.round;\n\n    if (!sound) {\n      return;\n    } else {\n      sound.seek(time);\n      setPosition(time);\n      setIsPlaying(true);\n    }\n  };\n\n  var onForward = function onForward() {\n    var curr_track, current_index;\n    return _regeneratorRuntime.async(function onForward$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            curr_track = playlist[current_track];\n            current_index = playlist.indexOf(curr_track) + 1;\n\n            if (current_index === playlist.length) {\n              setCurrentTrack(1);\n            } else {\n              setCurrentTrack(function (current_track) {\n                return current_track + 1;\n              });\n            }\n\n            onStopPress().then(function _callee() {\n              return _regeneratorRuntime.async(function _callee$(_context3) {\n                while (1) {\n                  switch (_context3.prev = _context3.next) {\n                    case 0:\n                      _context3.next = 2;\n                      return _regeneratorRuntime.awrap(onStartPress());\n\n                    case 2:\n                    case \"end\":\n                      return _context3.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            });\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, React.createElement(Header, {\n    message: \"Playing from charts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }), React.createElement(AlbumArt, {\n    url: song.albumArtUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }), React.createElement(TrackDetails, {\n    title: song.title,\n    artist: song.artist,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    onPress: playCurrentSong,\n    style: styles.startKaraoke,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, \"Start Karaoke!\"), React.createElement(FavoriteIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.controlContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: {\n      width: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }), React.createElement(TouchableOpacity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/ic_skip_previous_white_36pt.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    style: {\n      width: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }), isPlaying ? React.createElement(TouchableOpacity, {\n    onPress: onPlayPausePress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: styles.playButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/ic_pause_white_48pt.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }))) : React.createElement(TouchableOpacity, {\n    onPress: onPlayPausePress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: styles.playButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/ic_play_arrow_white_48pt.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }))), React.createElement(View, {\n    style: {\n      width: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }), React.createElement(TouchableOpacity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/ic_skip_next_white_36pt.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    style: {\n      width: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  })));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    backgroundColor: \"#4d4dff\"\n  },\n  startKaraoke: {\n    color: \"rgba(255, 255, 255, 0.72)\",\n    fontSize: 20,\n    marginTop: 10,\n    fontWeight: \"bold\"\n  },\n  playButton: {\n    height: 72,\n    width: 72,\n    borderWidth: 1,\n    borderColor: \"white\",\n    borderRadius: 72 / 2,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  controlContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingTop: 8\n  }\n});","map":{"version":3,"sources":["C:/Users/noopu/OneDrive/Documents/DIYKaraoke/Frontend/app/components/Player.js"],"names":["React","useEffect","useState","FavoriteIcon","Audio","Header","AlbumArt","TrackDetails","SeekBar","Player","props","sound","setSound","isPlaying","setIsPlaying","duration","setDuration","position","setPosition","selectedTrackNumber","setSelectedTrackNumber","console","log","song","tracks","onPlaybackStatusUpdate","status","durationMillis","positionMillis","playCurrentSong","audioUrl","Sound","createAsync","uri","shouldPlay","playAsync","unloadAsync","undefined","onPlayPausePress","stopAsync","getProgress","seek","time","Math","round","onForward","curr_track","playlist","current_track","current_index","indexOf","length","setCurrentTrack","onStopPress","then","onStartPress","styles","container","albumArtUrl","title","artist","startKaraoke","controlContainer","width","require","playButton","StyleSheet","create","flex","alignItems","backgroundColor","color","fontSize","marginTop","fontWeight","height","borderWidth","borderColor","borderRadius","justifyContent","flexDirection","paddingTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Text,\r\n  View,\r\n  StyleSheet,\r\n  Button,\r\n  TouchableOpacity,\r\n  Image,\r\n} from \"react-native\";\r\nimport FavoriteIcon from \"./FavoriteIcon\";\r\nimport { Audio } from \"expo-av\";\r\n\r\nimport Header from \"./Header\";\r\nimport AlbumArt from \"./AlbumArt\";\r\nimport TrackDetails from \"./TrackDetails\";\r\nimport SeekBar from \"./SeekBar\";\r\n\r\nexport default function Player(props) {\r\n  const [sound, setSound] = useState();\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [duration, setDuration] = useState(null);\r\n  const [position, setPosition] = useState(null);\r\n  const [selectedTrackNumber, setSelectedTrackNumber] = useState(\r\n    props.selectedTrackNumber - 1\r\n  );\r\n  console.log(props);\r\n  const song = props.tracks[selectedTrackNumber];\r\n\r\n  const onPlaybackStatusUpdate = (status) => {\r\n    setIsPlaying(status.isPlaying);\r\n    setDuration(status.durationMillis);\r\n    setPosition(status.positionMillis);\r\n    // console.log(status);\r\n  };\r\n\r\n  const playCurrentSong = async () => {\r\n    console.log(\"Loading Sound\");\r\n    console.log(song.audioUrl);\r\n    const { sound } = await Audio.Sound.createAsync(\r\n      { uri: song.audioUrl },\r\n      { shouldPlay: isPlaying },\r\n      onPlaybackStatusUpdate\r\n    );\r\n    setSound(sound);\r\n    await sound.playAsync();\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    return sound\r\n      ? () => {\r\n          console.log(\"Unloading Sound\"); //ensure song only played once\r\n          sound.unloadAsync();\r\n        }\r\n      : undefined;\r\n  }, [sound]);\r\n\r\n  const onPlayPausePress = async () => {\r\n    if (!sound) {\r\n      return;\r\n    }\r\n    if (isPlaying) {\r\n      await sound.stopAsync();\r\n    } else {\r\n      await sound.playAsync();\r\n    }\r\n  };\r\n\r\n  const getProgress = () => {\r\n    if ((sound == null) | (duration == null) || position == null) {\r\n      return 0;\r\n    }\r\n    return (position / duration) * 100;\r\n  };\r\n\r\n  const seek = (time) => {\r\n    time = Math.round;\r\n    if (!sound) {\r\n      return;\r\n    } else {\r\n      sound.seek(time);\r\n      setPosition(time);\r\n      setIsPlaying(true);\r\n    }\r\n  };\r\n\r\n  const onForward = async () => {\r\n    let curr_track = playlist[current_track];\r\n    let current_index = playlist.indexOf(curr_track) + 1;\r\n    if (current_index === playlist.length) {\r\n      setCurrentTrack(1);\r\n    } else {\r\n      setCurrentTrack((current_track) => current_track + 1);\r\n    }\r\n    onStopPress().then(async () => {\r\n      await onStartPress();\r\n    });\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Header message=\"Playing from charts\" />\r\n      <AlbumArt url={song.albumArtUrl} />\r\n      <TrackDetails title={song.title} artist={song.artist} />\r\n      <Text onPress={playCurrentSong} style={styles.startKaraoke}>\r\n        Start Karaoke!\r\n      </Text>\r\n      <FavoriteIcon />\r\n      {/* <Text>{getProgress()}</Text> */}\r\n      {/* <SeekBar\r\n        currentPosition={position}\r\n        trackLength={1}\r\n        onSeek={seek}\r\n        onSlidingStart={() => setIsPlaying(false)}\r\n      /> */}\r\n      <View style={styles.controlContainer}>\r\n        <View style={{ width: 40 }} />\r\n\r\n        <TouchableOpacity>\r\n          <Image\r\n            source={require(\"../assets/ic_skip_previous_white_36pt.png\")}\r\n          />\r\n        </TouchableOpacity>\r\n        <View style={{ width: 20 }} />\r\n\r\n        {isPlaying ? (\r\n          <TouchableOpacity onPress={onPlayPausePress}>\r\n            <View style={styles.playButton}>\r\n              <Image source={require(\"../assets/ic_pause_white_48pt.png\")} />\r\n            </View>\r\n          </TouchableOpacity>\r\n        ) : (\r\n          <TouchableOpacity onPress={onPlayPausePress}>\r\n            <View style={styles.playButton}>\r\n              <Image\r\n                source={require(\"../assets/ic_play_arrow_white_48pt.png\")}\r\n              />\r\n            </View>\r\n          </TouchableOpacity>\r\n        )}\r\n        <View style={{ width: 20 }} />\r\n        <TouchableOpacity>\r\n          <Image\r\n            // style={{ opacity: 0.3 }}\r\n            source={require(\"../assets/ic_skip_next_white_36pt.png\")}\r\n          />\r\n        </TouchableOpacity>\r\n        <View style={{ width: 40 }} />\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    // justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#4d4dff\",\r\n  },\r\n  startKaraoke: {\r\n    color: \"rgba(255, 255, 255, 0.72)\",\r\n    fontSize: 20,\r\n    marginTop: 10,\r\n    fontWeight: \"bold\",\r\n  },\r\n  playButton: {\r\n    height: 72,\r\n    width: 72,\r\n    borderWidth: 1,\r\n    borderColor: \"white\",\r\n    borderRadius: 72 / 2,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  controlContainer: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingTop: 8,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}