{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\noopu\\\\OneDrive\\\\Documents\\\\DIYKaraoke\\\\Frontend\\\\node_modules\\\\react-native-ratings\\\\src\\\\SwipeRating.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport times from 'lodash/times';\nimport PropTypes from 'prop-types';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\n\nvar STAR_IMAGE = require(\"./images/star.png\");\n\nvar HEART_IMAGE = require(\"./images/heart.png\");\n\nvar ROCKET_IMAGE = require(\"./images/rocket.png\");\n\nvar BELL_IMAGE = require(\"./images/bell.png\");\n\nvar TYPES = {\n  star: {\n    source: STAR_IMAGE,\n    color: '#f1c40f',\n    backgroundColor: 'white'\n  },\n  heart: {\n    source: HEART_IMAGE,\n    color: '#e74c3c',\n    backgroundColor: 'white'\n  },\n  rocket: {\n    source: ROCKET_IMAGE,\n    color: '#2ecc71',\n    backgroundColor: 'white'\n  },\n  bell: {\n    source: BELL_IMAGE,\n    color: '#f39c12',\n    backgroundColor: 'white'\n  }\n};\n\nvar SwipeRating = function (_Component) {\n  _inherits(SwipeRating, _Component);\n\n  var _super = _createSuper(SwipeRating);\n\n  function SwipeRating(props) {\n    var _this;\n\n    _classCallCheck(this, SwipeRating);\n\n    _this = _super.call(this, props);\n    var _this$props = _this.props,\n        onStartRating = _this$props.onStartRating,\n        onSwipeRating = _this$props.onSwipeRating,\n        onFinishRating = _this$props.onFinishRating,\n        fractions = _this$props.fractions;\n    var position = new Animated.ValueXY();\n    var panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: function onStartShouldSetPanResponder() {\n        return true;\n      },\n      onPanResponderGrant: function onPanResponderGrant(event, gesture) {\n        var newPosition = new Animated.ValueXY();\n        var tapPositionX = gesture.x0 - _this.state.centerX + gesture.dx;\n        newPosition.setValue({\n          x: tapPositionX,\n          y: 0\n        });\n\n        if (_this.state.isComponentMounted) {\n          _this.setState({\n            position: newPosition,\n            value: tapPositionX\n          });\n\n          var rating = _this.getCurrentRating(tapPositionX);\n\n          if (typeof onStartRating === 'function') {\n            onStartRating(rating);\n          }\n        }\n      },\n      onPanResponderMove: function onPanResponderMove(event, gesture) {\n        var newPosition = new Animated.ValueXY();\n        var tapPositionX = gesture.x0 - _this.state.centerX + gesture.dx;\n        newPosition.setValue({\n          x: tapPositionX,\n          y: 0\n        });\n\n        if (_this.state.isComponentMounted) {\n          _this.setState({\n            position: newPosition,\n            value: tapPositionX\n          });\n\n          var rating = _this.getCurrentRating(tapPositionX);\n\n          if (typeof onSwipeRating === \"function\") {\n            onSwipeRating(rating);\n          }\n        }\n      },\n      onPanResponderRelease: function onPanResponderRelease() {\n        var rating = _this.getCurrentRating(_this.state.value);\n\n        if (rating >= _this.props.minValue) {\n          if (!fractions) {\n            _this.setCurrentRating(rating);\n          }\n\n          if (typeof onFinishRating === 'function') {\n            onFinishRating(rating);\n          }\n        }\n      }\n    });\n    _this.state = {\n      panResponder: panResponder,\n      position: position,\n      display: false,\n      isComponentMounted: false\n    };\n    return _this;\n  }\n\n  _createClass(SwipeRating, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      try {\n        this.setState({\n          display: true,\n          isComponentMounted: true\n        }, function () {\n          return _this2.setCurrentRating(_this2.props.startingValue);\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.startingValue !== prevProps.startingValue) {\n        this.setCurrentRating(this.props.startingValue);\n      }\n    }\n  }, {\n    key: \"handleLayoutChange\",\n    value: function handleLayoutChange() {\n      var _this3 = this;\n\n      this.ratingRef.measure(function (fx, fy, width, height, px) {\n        var halfWidth = width / 2;\n        var pageXWithinWindow = px % Dimensions.get(\"window\").width;\n\n        _this3.setState({\n          centerX: pageXWithinWindow + halfWidth\n        });\n      });\n    }\n  }, {\n    key: \"getPrimaryViewStyle\",\n    value: function getPrimaryViewStyle() {\n      var position = this.state.position;\n      var _this$props2 = this.props,\n          imageSize = _this$props2.imageSize,\n          ratingCount = _this$props2.ratingCount,\n          type = _this$props2.type;\n      var color = TYPES[type].color;\n      var width = position.x.interpolate({\n        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],\n        outputRange: [0, ratingCount * imageSize / 2, ratingCount * imageSize],\n        extrapolate: 'clamp'\n      }, {\n        useNativeDriver: true\n      });\n      return {\n        backgroundColor: color,\n        width: width,\n        height: width ? imageSize : 0\n      };\n    }\n  }, {\n    key: \"getSecondaryViewStyle\",\n    value: function getSecondaryViewStyle() {\n      var position = this.state.position;\n      var _this$props3 = this.props,\n          imageSize = _this$props3.imageSize,\n          ratingCount = _this$props3.ratingCount,\n          type = _this$props3.type;\n      var backgroundColor = TYPES[type].backgroundColor;\n      var width = position.x.interpolate({\n        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],\n        outputRange: [ratingCount * imageSize, ratingCount * imageSize / 2, 0],\n        extrapolate: 'clamp'\n      }, {\n        useNativeDriver: true\n      });\n      return {\n        backgroundColor: backgroundColor,\n        width: width,\n        height: width ? imageSize : 0\n      };\n    }\n  }, {\n    key: \"renderRatings\",\n    value: function renderRatings() {\n      var _this4 = this;\n\n      var _this$props4 = this.props,\n          imageSize = _this$props4.imageSize,\n          ratingCount = _this$props4.ratingCount,\n          type = _this$props4.type,\n          tintColor = _this$props4.tintColor;\n      var source = TYPES[type].source;\n      return times(ratingCount, function (index) {\n        return React.createElement(View, {\n          key: index,\n          style: styles.starContainer,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 7\n          }\n        }, React.createElement(Image, {\n          source: source,\n          style: {\n            width: imageSize,\n            height: imageSize,\n            tintColor: tintColor\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 9\n          }\n        }));\n      });\n    }\n  }, {\n    key: \"getCurrentRating\",\n    value: function getCurrentRating(value) {\n      var _this$props5 = this.props,\n          fractions = _this$props5.fractions,\n          imageSize = _this$props5.imageSize,\n          ratingCount = _this$props5.ratingCount;\n      var startingValue = ratingCount / 2;\n      var currentRating = this.props.minValue ? this.props.minValue : 0;\n\n      if (value > ratingCount * imageSize / 2) {\n        currentRating = ratingCount;\n      } else if (value < -ratingCount * imageSize / 2) {\n        currentRating = this.props.minValue ? this.props.minValue : 0;\n      } else if (value <= imageSize || value > imageSize) {\n        var diff = value / imageSize;\n        currentRating = startingValue + diff;\n        currentRating = fractions ? Number(currentRating.toFixed(fractions)) : Math.ceil(currentRating);\n      } else {\n        currentRating = fractions ? Number(startingValue.toFixed(fractions)) : Math.ceil(startingValue);\n      }\n\n      if (this.props.jumpValue > 0 && this.props.jumpValue < this.props.ratingCount) {\n        return Math.ceil(currentRating * (1 / this.props.jumpValue)) / (1 / this.props.jumpValue);\n      } else {\n        return currentRating;\n      }\n    }\n  }, {\n    key: \"setCurrentRating\",\n    value: function setCurrentRating(rating) {\n      var _this$props6 = this.props,\n          imageSize = _this$props6.imageSize,\n          ratingCount = _this$props6.ratingCount;\n      var initialRating = ratingCount / 2;\n      var value = null;\n\n      if (rating > ratingCount) {\n        value = ratingCount * imageSize / 2;\n      } else if (rating < 0) {\n        value = -ratingCount * imageSize / 2;\n      } else if (rating < ratingCount / 2 || rating > ratingCount / 2) {\n        value = (rating - initialRating) * imageSize;\n      } else {\n        value = 0;\n      }\n\n      var newPosition = new Animated.ValueXY();\n      newPosition.setValue({\n        x: value,\n        y: 0\n      });\n\n      if (this.state.isComponentMounted) {\n        this.setState({\n          position: newPosition,\n          value: value\n        });\n      }\n    }\n  }, {\n    key: \"displayCurrentRating\",\n    value: function displayCurrentRating() {\n      var _this$props7 = this.props,\n          ratingCount = _this$props7.ratingCount,\n          type = _this$props7.type,\n          readonly = _this$props7.readonly,\n          showReadOnlyText = _this$props7.showReadOnlyText,\n          ratingTextColor = _this$props7.ratingTextColor;\n      var color = ratingTextColor || TYPES[type].color;\n      return React.createElement(View, {\n        style: styles.showRatingView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: styles.ratingView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: [styles.ratingText, {\n          color: color\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }\n      }, \"Rating:\", ' '), React.createElement(Text, {\n        style: [styles.currentRatingText, {\n          color: color\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }\n      }, this.getCurrentRating(this.state.value)), React.createElement(Text, {\n        style: [styles.maxRatingText, {\n          color: color\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }\n      }, \"/\", ratingCount)), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 9\n        }\n      }, readonly && showReadOnlyText && React.createElement(Text, {\n        style: [styles.readonlyLabel, {\n          color: color\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 48\n        }\n      }, \"(readonly)\")));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$props8 = this.props,\n          readonly = _this$props8.readonly,\n          type = _this$props8.type,\n          ratingImage = _this$props8.ratingImage,\n          ratingColor = _this$props8.ratingColor,\n          ratingBackgroundColor = _this$props8.ratingBackgroundColor,\n          style = _this$props8.style,\n          showRating = _this$props8.showRating;\n\n      if (type === 'custom') {\n        var custom = {\n          source: ratingImage,\n          color: ratingColor,\n          backgroundColor: ratingBackgroundColor\n        };\n        TYPES.custom = custom;\n      }\n\n      return this.state.display ? React.createElement(View, {\n        pointerEvents: readonly ? 'none' : 'auto',\n        style: style,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 7\n        }\n      }, showRating && this.displayCurrentRating(), React.createElement(View, _extends({\n        style: styles.starsWrapper\n      }, this.state.panResponder.panHandlers, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: styles.starsInsideWrapper,\n        onLayout: function onLayout(e) {\n          _this5.handleLayoutChange(e);\n        },\n        ref: function ref(view) {\n          _this5.ratingRef = view;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }\n      }, React.createElement(Animated.View, {\n        style: this.getPrimaryViewStyle(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }\n      }), React.createElement(Animated.View, {\n        style: this.getSecondaryViewStyle(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }\n      })), this.renderRatings())) : null;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.setState({\n        isComponentMounted: false\n      });\n    }\n  }]);\n\n  return SwipeRating;\n}(Component);\n\nSwipeRating.defaultProps = {\n  type: 'star',\n  ratingImage: STAR_IMAGE,\n  ratingColor: '#f1c40f',\n  ratingBackgroundColor: 'white',\n  ratingCount: 5,\n  showReadOnlyText: true,\n  imageSize: 40,\n  minValue: 0,\n  jumpValue: 0\n};\nexport { SwipeRating as default };\nvar styles = StyleSheet.create({\n  starsWrapper: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  starsInsideWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  showRatingView: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingBottom: 5\n  },\n  ratingView: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingBottom: 5\n  },\n  ratingText: {\n    fontSize: 15,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495e'\n  },\n  readonlyLabel: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: 12,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495a'\n  },\n  currentRatingText: {\n    fontSize: 30,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null\n  },\n  maxRatingText: {\n    fontSize: 18,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495e'\n  }\n});\n\nvar fractionsType = function fractionsType(props, propName, componentName) {\n  if (props[propName]) {\n    var value = props[propName];\n\n    if (typeof value === 'number') {\n      return value >= 0 && value <= 20 ? null : new Error(\"`\" + propName + \"` in `\" + componentName + \"` must be between 0 and 20\");\n    }\n\n    return new Error(\"`\" + propName + \"` in `\" + componentName + \"` must be a number\");\n  }\n};\n\nSwipeRating.propTypes = {\n  type: PropTypes.string,\n  ratingImage: PropTypes.node,\n  ratingColor: PropTypes.string,\n  ratingBackgroundColor: PropTypes.string,\n  ratingCount: PropTypes.number,\n  ratingTextColor: PropTypes.string,\n  imageSize: PropTypes.number,\n  onStartRating: PropTypes.func,\n  onFinishRating: PropTypes.func,\n  showRating: PropTypes.bool,\n  style: PropTypes.object,\n  readonly: PropTypes.bool,\n  showReadOnlyText: PropTypes.bool,\n  startingValue: PropTypes.number,\n  fractions: fractionsType,\n  minValue: PropTypes.number\n};","map":{"version":3,"sources":["C:/Users/noopu/OneDrive/Documents/DIYKaraoke/Frontend/node_modules/react-native-ratings/src/SwipeRating.js"],"names":["React","Component","times","PropTypes","STAR_IMAGE","require","HEART_IMAGE","ROCKET_IMAGE","BELL_IMAGE","TYPES","star","source","color","backgroundColor","heart","rocket","bell","SwipeRating","props","onStartRating","onSwipeRating","onFinishRating","fractions","position","Animated","ValueXY","panResponder","PanResponder","create","onStartShouldSetPanResponder","onPanResponderGrant","event","gesture","newPosition","tapPositionX","x0","state","centerX","dx","setValue","x","y","isComponentMounted","setState","value","rating","getCurrentRating","onPanResponderMove","onPanResponderRelease","minValue","setCurrentRating","display","startingValue","err","console","log","prevProps","ratingRef","measure","fx","fy","width","height","px","halfWidth","pageXWithinWindow","Dimensions","get","imageSize","ratingCount","type","interpolate","inputRange","outputRange","extrapolate","useNativeDriver","tintColor","index","styles","starContainer","currentRating","diff","Number","toFixed","Math","ceil","jumpValue","initialRating","readonly","showReadOnlyText","ratingTextColor","showRatingView","ratingView","ratingText","currentRatingText","maxRatingText","readonlyLabel","ratingImage","ratingColor","ratingBackgroundColor","style","showRating","custom","displayCurrentRating","starsWrapper","panHandlers","starsInsideWrapper","e","handleLayoutChange","view","getPrimaryViewStyle","getSecondaryViewStyle","renderRatings","defaultProps","StyleSheet","flexDirection","justifyContent","alignItems","top","left","right","bottom","paddingBottom","fontSize","textAlign","fontFamily","Platform","OS","fractionsType","propName","componentName","Error","propTypes","string","node","number","func","bool","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport times from 'lodash/times';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {\r\n  View, Text, Animated, PanResponder, Image,\r\n  StyleSheet, Platform, Dimensions\r\n} from 'react-native';\r\n\r\n// RATING IMAGES WITH STATIC BACKGROUND COLOR (white)\r\nconst STAR_IMAGE = require( './images/star.png' );\r\nconst HEART_IMAGE = require( './images/heart.png' );\r\nconst ROCKET_IMAGE = require( './images/rocket.png' );\r\nconst BELL_IMAGE = require( './images/bell.png' );\r\n\r\nconst TYPES = {\r\n  star: {\r\n    source: STAR_IMAGE,\r\n    color: '#f1c40f',\r\n    backgroundColor: 'white'\r\n  },\r\n  heart: {\r\n    source: HEART_IMAGE,\r\n    color: '#e74c3c',\r\n    backgroundColor: 'white'\r\n  },\r\n  rocket: {\r\n    source: ROCKET_IMAGE,\r\n    color: '#2ecc71',\r\n    backgroundColor: 'white'\r\n  },\r\n  bell: {\r\n    source: BELL_IMAGE,\r\n    color: '#f39c12',\r\n    backgroundColor: 'white'\r\n  }\r\n};\r\n\r\nexport default class SwipeRating extends Component {\r\n  static defaultProps = {\r\n    type: 'star',\r\n    ratingImage: STAR_IMAGE,\r\n    ratingColor: '#f1c40f',\r\n    ratingBackgroundColor: 'white',\r\n    ratingCount: 5,\r\n    showReadOnlyText: true,\r\n    imageSize: 40,\r\n    minValue: 0,\r\n    jumpValue: 0\r\n  };\r\n\r\n  constructor( props ) {\r\n    super( props );\r\n    const { onStartRating, onSwipeRating, onFinishRating, fractions } = this.props;\r\n    const position = new Animated.ValueXY();\r\n\r\n    const panResponder = PanResponder.create( {\r\n      onStartShouldSetPanResponder: () => true,\r\n      onPanResponderGrant: ( event, gesture ) => {\r\n        const newPosition = new Animated.ValueXY();\r\n        const tapPositionX = gesture.x0 - this.state.centerX + gesture.dx;\r\n\r\n        newPosition.setValue( { x: tapPositionX, y: 0 } );\r\n        if ( this.state.isComponentMounted ) {\r\n          this.setState( { position: newPosition, value: tapPositionX } );\r\n          const rating = this.getCurrentRating( tapPositionX );\r\n\r\n          if ( typeof onStartRating === 'function' ) {\r\n            onStartRating( rating );\r\n          }\r\n        }\r\n      },\r\n      onPanResponderMove: ( event, gesture ) => {\r\n        const newPosition = new Animated.ValueXY();\r\n        const tapPositionX = gesture.x0 - this.state.centerX + gesture.dx;\r\n\r\n        newPosition.setValue( { x: tapPositionX, y: 0 } );\r\n        if ( this.state.isComponentMounted ) {\r\n          this.setState( { position: newPosition, value: tapPositionX } );\r\n          const rating = this.getCurrentRating( tapPositionX );\r\n\r\n          if ( typeof onSwipeRating === \"function\" ) {\r\n            onSwipeRating( rating );\r\n          }\r\n        }\r\n      },\r\n      onPanResponderRelease: () => {\r\n        const rating = this.getCurrentRating( this.state.value );\r\n\r\n        if ( rating >= this.props.minValue ) {\r\n          if ( !fractions ) {\r\n            // 'round up' to the nearest rating image\r\n            this.setCurrentRating( rating );\r\n          }\r\n          if ( typeof onFinishRating === 'function' ) {\r\n            onFinishRating( rating );\r\n          }\r\n        }\r\n      }\r\n    } );\r\n\r\n    this.state = { panResponder, position, display: false, isComponentMounted: false };\r\n  }\r\n\r\n componentDidMount() {\r\n    try {\r\n      this.setState(\r\n        { display: true, isComponentMounted: true },\r\n        () => this.setCurrentRating( this.props.startingValue )\r\n      );\r\n    } catch ( err ) {\r\n      // eslint-disable-next-line no-console\r\n      console.log( err )\r\n    }\r\n\r\n  }\r\n\r\n  componentDidUpdate( prevProps ) {\r\n    if ( this.props.startingValue !== prevProps.startingValue ) {\r\n      this.setCurrentRating( this.props.startingValue );\r\n    }\r\n  }\r\n\r\n  handleLayoutChange() {\r\n    // eslint-disable-next-line max-params\r\n    this.ratingRef.measure( ( fx, fy, width, height, px ) => {\r\n      const halfWidth = width / 2\r\n      const pageXWithinWindow = px % Dimensions.get( \"window\" ).width\r\n\r\n      this.setState( {\r\n        centerX: pageXWithinWindow + halfWidth\r\n      } );\r\n    } );\r\n  }\r\n\r\n  getPrimaryViewStyle() {\r\n    const { position } = this.state;\r\n    const { imageSize, ratingCount, type } = this.props;\r\n\r\n    const {color} = TYPES[type];\r\n\r\n    const width = position.x.interpolate(\r\n      {\r\n        inputRange: [-ratingCount * ( imageSize / 2 ), 0, ratingCount * ( imageSize / 2 )],\r\n        outputRange: [0, ratingCount * imageSize / 2, ratingCount * imageSize],\r\n        extrapolate: 'clamp'\r\n      },\r\n      {\r\n        useNativeDriver: true\r\n      }\r\n    );\r\n\r\n    return {\r\n      backgroundColor: color,\r\n      width,\r\n      height: width ? imageSize : 0\r\n    };\r\n  }\r\n\r\n  getSecondaryViewStyle() {\r\n    const { position } = this.state;\r\n    const { imageSize, ratingCount, type } = this.props;\r\n\r\n    const {backgroundColor} = TYPES[type];\r\n\r\n    const width = position.x.interpolate(\r\n      {\r\n        inputRange: [-ratingCount * ( imageSize / 2 ), 0, ratingCount * ( imageSize / 2 )],\r\n        outputRange: [ratingCount * imageSize, ratingCount * imageSize / 2, 0],\r\n        extrapolate: 'clamp'\r\n      },\r\n      {\r\n        useNativeDriver: true\r\n      }\r\n    );\r\n\r\n    return {\r\n      backgroundColor,\r\n      width,\r\n      height: width ? imageSize : 0\r\n    };\r\n  }\r\n\r\n  renderRatings() {\r\n    const { imageSize, ratingCount, type, tintColor } = this.props;\r\n    const {source} = TYPES[type];\r\n\r\n    return times( ratingCount, index =>\r\n      <View key={index} style={styles.starContainer}>\r\n        <Image source={source} style={{ width: imageSize, height: imageSize, tintColor }} />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  // eslint-disable-next-line max-statements\r\n  getCurrentRating( value ) {\r\n    const { fractions, imageSize, ratingCount } = this.props;\r\n\r\n    const startingValue = ratingCount / 2;\r\n\r\n    let currentRating = this.props.minValue ? this.props.minValue : 0;\r\n\r\n    if ( value > ratingCount * imageSize / 2 ) {\r\n      currentRating = ratingCount;\r\n    } else if ( value < -ratingCount * imageSize / 2 ) {\r\n      currentRating = this.props.minValue ? this.props.minValue : 0;\r\n    } else if ( value <= imageSize || value > imageSize ) {\r\n      const diff = value / imageSize\r\n\r\n      currentRating = startingValue + diff;\r\n      currentRating = fractions ? Number( currentRating.toFixed( fractions ) ) : Math.ceil( currentRating );\r\n    } else {\r\n      currentRating = fractions ? Number( startingValue.toFixed( fractions ) ) : Math.ceil( startingValue );\r\n    }\r\n    if (\r\n      this.props.jumpValue > 0 &&\r\n      this.props.jumpValue < this.props.ratingCount\r\n    ) {\r\n      return (\r\n        Math.ceil( currentRating * ( 1 / this.props.jumpValue ) ) /\r\n        ( 1 / this.props.jumpValue )\r\n      );\r\n    } else {\r\n      return currentRating;\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line max-statements\r\n  setCurrentRating( rating ) {\r\n    const { imageSize, ratingCount } = this.props;\r\n\r\n    // `initialRating` corresponds to `startingValue` in the getter. Naming it\r\n    // Differently here avoids confusion with `value` below.\r\n    const initialRating = ratingCount / 2;\r\n\r\n    let value = null;\r\n\r\n    if ( rating > ratingCount ) {\r\n      value = ratingCount * imageSize / 2;\r\n    } else if ( rating < 0 ) {\r\n      value = -ratingCount * imageSize / 2;\r\n    } else if ( rating < ratingCount / 2 || rating > ratingCount / 2 ) {\r\n      value = ( rating - initialRating ) * imageSize;\r\n    } else {\r\n      value = 0;\r\n    }\r\n\r\n    const newPosition = new Animated.ValueXY();\r\n\r\n    newPosition.setValue( { x: value, y: 0 } );\r\n    if ( this.state.isComponentMounted ) {\r\n      this.setState( {position: newPosition, value} );\r\n    }\r\n  }\r\n\r\n  displayCurrentRating() {\r\n    const { ratingCount, type, readonly, showReadOnlyText, ratingTextColor } = this.props;\r\n    const color = ratingTextColor || TYPES[type].color;\r\n\r\n    return (\r\n      <View style={styles.showRatingView}>\r\n        <View style={styles.ratingView}>\r\n          <Text style={[styles.ratingText, { color }]}>Rating:{' '}</Text>\r\n          <Text style={[styles.currentRatingText, { color }]}>{this.getCurrentRating( this.state.value )}</Text>\r\n          <Text style={[styles.maxRatingText, { color }]}>/{ratingCount}</Text>\r\n        </View>\r\n        <View>{readonly && showReadOnlyText && <Text style={[styles.readonlyLabel, { color }]}>(readonly)</Text>}</View>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { readonly, type, ratingImage, ratingColor, ratingBackgroundColor, style, showRating } = this.props;\r\n\r\n    if ( type === 'custom' ) {\r\n      const custom = {\r\n        source: ratingImage,\r\n        color: ratingColor,\r\n        backgroundColor: ratingBackgroundColor\r\n      };\r\n\r\n      TYPES.custom = custom;\r\n    }\r\n\r\n    return (\r\n      this.state.display ?\r\n      <View pointerEvents={readonly ? 'none' : 'auto'} style={style}>\r\n        {showRating && this.displayCurrentRating()}\r\n        <View style={styles.starsWrapper} {...this.state.panResponder.panHandlers}>\r\n            <View style={styles.starsInsideWrapper} onLayout={e => {\r\n              this.handleLayoutChange( e )\r\n            }} ref={view => {\r\n              this.ratingRef = view;\r\n            }}>\r\n            <Animated.View style={this.getPrimaryViewStyle()} />\r\n            <Animated.View style={this.getSecondaryViewStyle()} />\r\n          </View>\r\n          {this.renderRatings()}\r\n        </View>\r\n      </View> :\r\n      null\r\n    );\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setState( { isComponentMounted: false } );\r\n  }\r\n\r\n}\r\n\r\nconst styles = StyleSheet.create( {\r\n  starsWrapper: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  starsInsideWrapper: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  showRatingView: {\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    paddingBottom: 5\r\n  },\r\n  ratingView: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    paddingBottom: 5\r\n  },\r\n  ratingText: {\r\n    fontSize: 15,\r\n    textAlign: 'center',\r\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\r\n    color: '#34495e'\r\n  },\r\n  readonlyLabel: {\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    fontSize: 12,\r\n    textAlign: 'center',\r\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\r\n    color: '#34495a'\r\n  },\r\n  currentRatingText: {\r\n    fontSize: 30,\r\n    textAlign: 'center',\r\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null\r\n  },\r\n  maxRatingText: {\r\n    fontSize: 18,\r\n    textAlign: 'center',\r\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\r\n    color: '#34495e'\r\n  }\r\n} );\r\n\r\nconst fractionsType = ( props, propName, componentName ) => {\r\n  if ( props[propName] ) {\r\n    const value = props[propName];\r\n\r\n    if ( typeof value === 'number' ) {\r\n      return value >= 0 && value <= 20 ?\r\n        null :\r\n        new Error( `\\`${propName}\\` in \\`${componentName}\\` must be between 0 and 20` );\r\n    }\r\n\r\n    return new Error( `\\`${propName}\\` in \\`${componentName}\\` must be a number` );\r\n  }\r\n};\r\n\r\nSwipeRating.propTypes = {\r\n  type: PropTypes.string,\r\n  ratingImage: PropTypes.node,\r\n  ratingColor: PropTypes.string,\r\n  ratingBackgroundColor: PropTypes.string,\r\n  ratingCount: PropTypes.number,\r\n  ratingTextColor: PropTypes.string,\r\n  imageSize: PropTypes.number,\r\n  onStartRating: PropTypes.func,\r\n  onFinishRating: PropTypes.func,\r\n  showRating: PropTypes.bool,\r\n  style: PropTypes.object,\r\n  readonly: PropTypes.bool,\r\n  showReadOnlyText: PropTypes.bool,\r\n  startingValue: PropTypes.number,\r\n  fractions: fractionsType,\r\n  minValue: PropTypes.number\r\n};\r\n"]},"metadata":{},"sourceType":"module"}